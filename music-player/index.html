<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Player Design - Easy Tutorials</title>
    <link rel="stylesheet" href="main.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="container">
      <div class="music-player">
        <nav>
          <div class="circle">
            <i class="fa-solid fa-chevron-left"></i>
          </div>
          <div class="circle">
            <i class="fa-solid fa-bars"></i>
          </div>
        </nav>
        <img src="/media/thumnail.jfif" class="song-img" alt="" />
        <h1>λ…Έλμ λ©</h1>
        <p>κ°€μμ΄λ¦„</p>

        <audio id="song">
          <source src="/media/player.mp4" />
        </audio>
        <input type="range" value="0" id="progress" />

        <div class="controls">
          <div><i class="fa-solid fa-backward"></i></div>
          <div onclick="playPause()">
            <i class="fa-solid fa-play" id="ctrlIcon"></i>
          </div>
          <div><i class="fa-solid fa-forward"></i></div>
        </div>
      </div>
    </div>

    <script>
      let progress = document.getElementById("progress");
      let song = document.getElementById("song");
      let ctrlIcon = document.getElementById("ctrlIcon");

      // 2. λ…Έλ μ •λ³΄κ°€ λ΅λ“λλ©΄ μ‹¤ν–‰ν•  μ΄κΈ° μ„¤μ •
// (λ…Έλλ¥Ό λ¶λ¬μ™”μ„ λ• ν• λ² μ‹¤ν–‰λ©λ‹λ‹¤.)
song.onloadedmetadata = function () {
  // μμ•…μ μ΄ κΈΈμ΄(duration)λ¥Ό μ§„ν–‰ λ°”μ μµλ€κ°’(max)μΌλ΅ μ„¤μ •ν•©λ‹λ‹¤.
  progress.max = song.duration;
  // μ§„ν–‰ λ°”μ ν„μ¬ μ„μΉ(value)λ¥Ό μμ•…μ ν„μ¬ μ¬μƒ μ‹κ°„(currentTime)μΌλ΅ μ„¤μ •ν•©λ‹λ‹¤.
  progress.value = song.currentTime;
};

// 3. μ¬μƒ/μΌμ‹μ •μ§€ κΈ°λ¥μ„ λ‹΄λ‹Ήν•λ” ν•¨μ μ •μ
function playPause() {
  // ν„μ¬ μ•„μ΄μ½μ΄ 'μΌμ‹μ •μ§€' λ¨μ–‘μΈμ§€ (μ¦‰, μμ•…μ΄ μ¬μƒ μ¤‘μΈμ§€) ν™•μΈν•©λ‹λ‹¤.
  if (ctrlIcon.classList.contains("fa-pause")) {
    // πµ μμ•…μ„ λ©μ¶”κ³  (μΌμ‹μ •μ§€)
    song.pause();
    // μ•„μ΄μ½μ„ 'μΌμ‹μ •μ§€'μ—μ„ 'μ¬μƒ' λ¨μ–‘μΌλ΅ λ°”κΏ‰λ‹λ‹¤.
    ctrlIcon.classList.remove("fa-pause");
    ctrlIcon.classList.add("fa-play");
  } else {
    // β―οΈ μμ•…μ„ μ¬μƒν•κ³  (λ©μ¶°μκ±°λ‚ μ²μ μƒνƒμΌ λ•)
    song.play();
    // μ•„μ΄μ½μ„ 'μ¬μƒ'μ—μ„ 'μΌμ‹μ •μ§€' λ¨μ–‘μΌλ΅ λ°”κΏ‰λ‹λ‹¤.
    ctrlIcon.classList.add("fa-pause");
    ctrlIcon.classList.remove("fa-play");
  }
}

// 4. μμ•…μ΄ μ¬μƒλλ” λ™μ• μ§„ν–‰ λ°”λ¥Ό μ—…λ°μ΄νΈν•λ” λ΅μ§
// (β οΈ μ£Όμ: `song.play()`λ” μ‹¤ν–‰ λ…λ ΉμΌ λΏ, ν„μ¬ μ¬μƒ μƒνƒλ¥Ό ν™•μΈν•λ” μ •ν™•ν• λ°©λ²•μ€ μ•„λ‹™λ‹λ‹¤.
//       μ΄ λ¶€λ¶„μ€ "μμ•… μ¬μƒμ„ μ‹λ„ν•λ©΄" μ‹¤ν–‰λλ„λ΅ μ‘μ„±λ κ²ƒμΌλ΅ λ³΄μ…λ‹λ‹¤.)
if (song.play()) {
  // 0.5μ΄(500λ°€λ¦¬μ΄)λ§λ‹¤ ν• λ²μ”© λ‚΄λ¶€ μ½”λ“λ¥Ό λ°λ³µν•΄μ„ μ‹¤ν–‰ν•©λ‹λ‹¤.
  setInterval(() => {
    // μ§„ν–‰ λ°”μ μ„μΉλ¥Ό ν„μ¬ μμ•… μ¬μƒ μ‹κ°„μΌλ΅ μ—…λ°μ΄νΈν•μ—¬, λ°”κ°€ μ›€μ§μ΄κ² ν•©λ‹λ‹¤.
    progress.value = song.currentTime;
  }, 500);
}

// 5. μ‚¬μ©μκ°€ μ§„ν–‰ λ°”λ¥Ό μ›€μ§μ€μ„ λ• μμ•… μ‹κ°„λ„ λ³€κ²½ν•λ” λ΅μ§
// (β οΈ μ£Όμ: `<input type="range">`μ—λ” λ³΄ν†µ `onchange`λ‚ `oninput` μ΄λ²¤νΈλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
//       μ—¬κΈ°μ„λ” `onchange` μ΄λ²¤νΈκ°€ μ‚¬μ©λ κ²ƒμΌλ΅ κ°€μ •ν•κ³  μ„¤λ…ν•©λ‹λ‹¤.)
progress.onchange = function () {
  // μ‚¬μ©μκ°€ λ°”λ¥Ό μ›€μ§μ€μΌλ‹, μμ•… μ¬μƒμ„ μ‹μ‘/μ μ§€ν•©λ‹λ‹¤.
  song.play();
  // μμ•…μ μ¬μƒ μ‹κ°„μ„ μ§„ν–‰ λ°”κ°€ κ°€λ¦¬ν‚¤λ” μ‹κ°„μΌλ΅ μ¦‰μ‹ μ΄λ™μ‹ν‚µλ‹λ‹¤. (νƒμƒ‰ κΈ°λ¥)
  song.currentTime = progress.value;
  // νƒμƒ‰ ν›„μ—λ” μμ•…μ΄ μ¬μƒ μ¤‘μ΄λ―€λ΅ μ•„μ΄μ½μ„ 'μΌμ‹μ •μ§€' λ¨μ–‘μΌλ΅ μ„¤μ •ν•©λ‹λ‹¤.
  ctrlIcon.classList.add("fa-pause");
  ctrlIcon.classList.remove("fa-play");
};
    </script>
  </body>
</html>
